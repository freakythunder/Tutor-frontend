(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{2154:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/main",function(){return n(9775)}])},9775:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>B});var s=n(4848),a=n(6540),r=n(8553),o=n(2004),i=n.n(o),l=n(4763);let u=async e=>{try{return(await l.A.post("/code/execute",{code:e})).data}catch(e){throw console.error("Error executing code:",e),e}},c=(0,a.forwardRef)((e,t)=>{let{height:n,onRun:o}=e,l=`
  /*
  This is the code editor where you will practice writing code. 
  Just follow the instructions in the section to the left. 
  Once you are ready, click on "Let's begin" to the bottom right. 
  */
  `,[c,d]=(0,a.useState)(),[m,h]=(0,a.useState)(!1),[p,_]=(0,a.useState)(!0),g=(0,a.useRef)(null),f=(0,a.useRef)(!1),v=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,()=>({getCode:()=>c||""}));let C=async()=>{if(!p){f.current=!0,h(!0);try{let e=await u(c),t=e.success?e.data.output:"Error while executing code.";o(t)}catch{o("Error while executing code.")}finally{h(!1)}}},x=e=>{let t=e.target;!g.current||g.current.getDomNode().contains(t)||v.current===t||v.current?.contains(t)||f.current||c&&c.trim()||_(!0)};return(0,a.useEffect)(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}),[c]),(0,s.jsxs)("div",{className:i().ideContainer,children:[(0,s.jsx)("div",{className:i().buttonContainer,children:(0,s.jsx)("button",{className:i().runButton,onClick:C,disabled:p||m,children:m?"Running...":"Run"})}),(0,s.jsxs)("div",{className:i().editorContainer,children:[(0,s.jsx)(r.Ay,{defaultLanguage:"python",value:c,onChange:e=>{void 0!==e&&e!==l&&(d(e),_(!1))},theme:"vs-dark",options:{minimap:{enabled:!0},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0},onMount:e=>{g.current=e,e.onDidFocusEditorWidget(()=>{})}}),p&&(0,s.jsx)("div",{className:i().placeholderOverlay,children:l})]})]})});c.displayName="IDE";var d=n(4620),m=n(222),h=n(4828),p=n.n(h);let _=e=>{let{output:t,isLoading:n,onClose:r,containerWidth:o,height:i}=e,l=(0,a.useRef)(null);return(0,s.jsxs)("div",{ref:l,className:p().outputContainer,children:[(0,s.jsxs)("div",{className:p().outputHeader,children:[(0,s.jsx)("h3",{children:"Output"}),(0,s.jsx)("button",{onClick:r,className:p().closeButton,children:"Close"})]}),(0,s.jsx)("div",{className:p().outputContent,children:(0,s.jsx)(d.A,{language:"python",style:m.A,wrapLines:!0,children:t})})]})};var g=n(4313),f=n.n(g);let v=e=>{let{chatInterfaceRef:t}=e,[n,r]=(0,a.useState)(30),[o,i]=(0,a.useState)(60),[l,u]=(0,a.useState)(""),d=(0,a.useRef)(null),m=(0,a.useRef)(null),h=(0,a.useRef)(!1),[p,g]=(0,a.useState)(!1),[v,C]=(0,a.useState)(!1),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{"true"===localStorage.getItem("IsNewUser ")?g(!0):C(!0)},[]);let w=()=>d.current?.clientHeight||window.innerHeight;(0,a.useEffect)(()=>{w(),i(90-n)},[n]);let b=(0,a.useCallback)(e=>{u(e),console.log("output is :"+e),r(30)},[]),I=e=>{if(!h.current)return;let t=w(),n=(t-e.clientY)/t*100;n>=5&&n<=60&&(r(n),i(90-n))},j=()=>{h.current=!0,window.addEventListener("mousemove",I),window.addEventListener("mouseup",R)},R=()=>{h.current=!1,window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",R)};return(0,a.useEffect)(()=>(m.current&&m.current.addEventListener("mousedown",j),()=>{m.current?.removeEventListener("mousedown",j),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",R)}),[]),(0,s.jsxs)("div",{ref:d,className:f().splitterContainer,style:{position:"relative",height:"100%"},children:[(0,s.jsx)("div",{className:f().ideSection,style:{height:`${o}%`,overflow:"hidden"},children:(0,s.jsx)(c,{ref:x,height:o,onRun:b})}),(0,s.jsx)("div",{ref:m,className:f().splitter}),(0,s.jsx)("div",{className:f().outputSection,style:{height:n?`${n}%`:"0",display:n?"block":"none"},children:(0,s.jsx)(_,{output:l,isLoading:!1,onClose:()=>{r(0),i(90)},containerWidth:d.current?.clientWidth||0,height:n})}),(0,s.jsxs)("div",{className:f().buttonContainer,style:{position:"absolute",bottom:0,right:0,padding:"10px",display:"flex",width:"100%"},children:[(0,s.jsxs)("p",{style:{fontFamily:"Sometype Mono",marginRight:"10px",fontSize:"18px",fontWeight:"600",color:"#000"},children:[" ","Have feedback for us?"]}),(0,s.jsx)("button",{onClick:()=>{window.open("https://calendly.com/adityaramteke-1357/30min","_blank")},className:`${f().bookCallButton} ${f().button}`,children:"Book a Call"}),(0,s.jsx)("div",{style:{flexGrow:1}})," ",(0,s.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[p&&(0,s.jsx)("button",{onClick:()=>{t.current&&(t.current.addMessage("Let's Begin"),g(!1),setTimeout(()=>{C(!0)},1e3))},className:`${f().beginButton} ${f().button}`,children:"Let's Begin"}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{if(t.current){let e=x.current.getCode(),n=`Need Help: ${e}`;t.current.addMessage(n)}},className:`${f().helpButton} ${f().button}`,children:"Help"}),(0,s.jsx)("button",{onClick:()=>{t.current&&t.current.addMessage("Next")},className:`${f().challengeButton} ${f().button}`,children:"Next"})]})]})]})]})};var C=n(4685),x=n.n(C);let w=async e=>{try{return(await l.A.post("/chat/send",{message:e})).data}catch(e){throw console.error("Error sending message:",e),e}},b=async()=>{try{let e=await l.A.get("/chat/past");return console.log("Raw API response:",e),console.log("Response data:",e.data),e.data}catch(e){throw console.error("Error fetching conversations:",e),e}};var I=n(8181),j=n(3383);let R=e=>{let{response:t}=e,n=(()=>{let e=t.aiResponse;return"string"==typeof e?e.trim():"object"==typeof e?(e.aiResponse||"").trim():""})();return n?(0,s.jsx)("div",{className:x().aiResponseContainer,children:(0,s.jsx)(I.o,{remarkPlugins:[j.A],components:{code(e){let{inline:t,className:n,children:a,...r}=e,o=/language-(\w+)/.exec(n||"");return!t&&o?(0,s.jsx)(d.A,{style:m.A,language:o[1],className:x().codeBlock,PreTag:"div",...r,children:String(a).replace(/\n$/,"")}):(0,s.jsx)("code",{className:t?x().inlineCode:"",...r,children:a})},h3:e=>{let{...t}=e;return(0,s.jsx)("h3",{className:x().aiResponseHeader,...t})},p:e=>{let{node:t,children:n,...a}=e,r=String(n).toLowerCase(),o=r.includes("try this challenge")||r.includes("challenge:");return(0,s.jsx)("p",{className:o?x().challengePrompt:x().aiResponseText,...a,children:n})},ul:e=>{let{...t}=e;return(0,s.jsx)("ul",{className:x().bulletPoints,...t})},li:e=>{let{...t}=e;return(0,s.jsx)("li",{className:x().bulletPoint,...t})},blockquote:e=>{let{node:t,...n}=e;return a.createElement("div",{className:x().hint,...n})}},children:n})}):null};var N=n(3353);let y=(0,a.forwardRef)((e,t)=>{let[n,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[l,u]=(0,a.useState)(null),c=(0,a.useRef)(null),{welcomeMessage:d,clearWelcomeMessage:m}=(0,N.A)(),h=localStorage.getItem("token"),p=h?JSON.parse(atob(h.split(".")[1])).username:null,_=(0,a.useCallback)(()=>{setTimeout(()=>{c.current?.scrollIntoView({behavior:"smooth"})},100)},[]);(0,a.useEffect)(()=>{g()},[]),(0,a.useEffect)(()=>{n.length>0&&_()},[n]),(0,a.useImperativeHandle)(t,()=>({addMessage(e){f(e)}}));let g=async()=>{try{let e=await b(),t=[];if(e.success){Array.isArray(e.data)?t=e.data:e.data&&"chats"in e.data&&(t=e.data.chats||[]);let n=t.map(e=>({_id:e._id||Date.now().toString(),user_id:e.user_id||e.userId||"",userMessage:e.userMessage||"",aiResponse:e.aiResponse||"",timestamp:e.timestamp||new Date().toISOString()})).sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());if(r(n),d){let e={_id:Date.now().toString(),user_id:"AI",userMessage:"",aiResponse:d,timestamp:new Date().toISOString()};r(t=>[...t,e]),m()}}else console.error("Invalid response format:",e),u(e.message||"Failed to load conversations")}catch(e){console.error("Error loading conversations:",e),u("Failed to load past conversations")}},f=async e=>{if(!e.trim()||o)return;i(!0),u(null);let t=e.trim().toLowerCase(),n=e;n="next"===t?"Next":"let's begin"===t?"Let's begin":"Need help";let s={_id:Date.now().toString(),user_id:p||"",userMessage:n,aiResponse:"",timestamp:new Date().toISOString()};r(e=>[...e,s]);try{let t=await w(e);if(t.success)r(e=>e.map(e=>e._id===s._id?{...e,aiResponse:t.data.aiResponse||"No response",timestamp:new Date().toISOString()}:e));else throw Error("Invalid response from server")}catch(e){console.error("Error sending message:",e),u("Failed to send message"),r(e=>e.map(e=>e._id===s._id?{...e,aiResponse:"Error: Failed to get response"}:e))}finally{i(!1)}},v=e=>"string"==typeof e?{user_id:"AI",userMessage:"",aiResponse:e,timestamp:new Date().toISOString()}:"object"==typeof e?{user_id:e.user_id||"AI",userMessage:e.userMessage||"",aiResponse:e.aiResponse||"",timestamp:e.timestamp||new Date().toISOString()}:{user_id:"AI",userMessage:"",aiResponse:"",timestamp:new Date().toISOString()},C=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:x().chatContainer,children:[(0,s.jsxs)("div",{className:x().messagesContainer,children:[n.map(e=>(0,s.jsxs)("div",{className:x().messageWrapper,children:[e.userMessage&&(0,s.jsxs)("div",{className:x().userMessage,children:[(0,s.jsx)("p",{className:x().messageContent,children:e.userMessage}),(0,s.jsx)("div",{className:x().timestamp,children:C(e.timestamp)})]}),e.aiResponse&&(0,s.jsxs)("div",{className:x().aiMessage,children:[(0,s.jsx)(R,{response:v(e.aiResponse)}),(0,s.jsx)("div",{className:x().timestamp,children:C(e.timestamp)})]})]},e._id)),(0,s.jsx)("div",{ref:c})]}),l&&(0,s.jsx)("div",{className:x().errorMessage,children:l})]})});y.displayName="ChatInterface";var S=n(4894),E=n.n(S);let k=()=>{let[e,t]=(0,a.useState)(30),n=(0,a.useRef)(null),r=(0,a.useRef)(!1),o=(0,a.useRef)(null),i=(0,a.useCallback)(e=>{if(!r.current||!n.current)return;let s=n.current.offsetWidth,a=e.clientX/s*100;a>20&&a<80&&t(a)},[]),l=(0,a.useCallback)(()=>{r.current=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l)},[i]),u=(0,a.useCallback)(()=>{r.current=!0,document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)},[i,l]);return(0,s.jsxs)("div",{className:E().container,ref:n,children:[(0,s.jsx)("div",{className:E().leftPane,style:{width:`${e}%`},children:(0,s.jsx)(y,{ref:o})}),(0,s.jsx)("div",{className:E().resizer,onMouseDown:u}),(0,s.jsx)("div",{className:E().rightPane,style:{width:`${100-e}%`},children:(0,s.jsx)(v,{chatInterfaceRef:o})})]})},B=()=>(0,s.jsx)(k,{})},3353:(e,t,n)=>{"use strict";n.d(t,{A:()=>r}),n(4848);var s=n(6540);let a=(0,s.createContext)(void 0),r=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4763:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(4335);let a=n(7836).env.REACT_APP_API_URL;console.log("API URL:",a);let r=s.A.create({baseURL:a,timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("username")),Promise.reject(e)));let o=r},4685:e=>{e.exports={chatContainer:"ChatInterface_chatContainer__ys1vL",messagesContainer:"ChatInterface_messagesContainer__MmBzf",messageWrapper:"ChatInterface_messageWrapper__IRSjy",userMessage:"ChatInterface_userMessage__rJsan",aiMessage:"ChatInterface_aiMessage__ARGOu",timestamp:"ChatInterface_timestamp__XqMyo",errorMessage:"ChatInterface_errorMessage__Dw4xP",buttonContainer:"ChatInterface_buttonContainer__tzqxt",challengeButton:"ChatInterface_challengeButton__ClY_u",helpButton:"ChatInterface_helpButton__UVX1W",actionButton:"ChatInterface_actionButton__05xOH",aiResponseContainer:"ChatInterface_aiResponseContainer__N05JW",aiResponseHeader:"ChatInterface_aiResponseHeader__lw1sL",aiResponseText:"ChatInterface_aiResponseText__LsXbV",bulletPoints:"ChatInterface_bulletPoints__Wlxu_",bulletPoint:"ChatInterface_bulletPoint__oqK03",codeBlock:"ChatInterface_codeBlock__fqAQB",inlineCode:"ChatInterface_inlineCode__6wn34",challengePrompt:"ChatInterface_challengePrompt__81xni",hint:"ChatInterface_hint__eO2En",fadeIn:"ChatInterface_fadeIn__mbHph"}},4313:e=>{e.exports={splitter:"HorizontalSplitter_splitter__rM3CC",buttonContainer:"HorizontalSplitter_buttonContainer__DAXTC",button:"HorizontalSplitter_button__d4Jfz",challengeButton:"HorizontalSplitter_challengeButton__mj9C5",helpButton:"HorizontalSplitter_helpButton__mW5MX",beginButton:"HorizontalSplitter_beginButton__sDlOu",bookCallButton:"HorizontalSplitter_bookCallButton__Ur9DW"}},2004:e=>{e.exports={ideContainer:"IDE_ideContainer__ck297",placeholderOverlay:"IDE_placeholderOverlay__cvONI",editorContainer:"IDE_editorContainer__XP7Jo",buttonContainer:"IDE_buttonContainer__lxBCV",runButton:"IDE_runButton__vuIMn"}},4894:e=>{e.exports={container:"ResizableContainer_container___0lN7",leftPane:"ResizableContainer_leftPane__s9Tpr",rightPane:"ResizableContainer_rightPane__k7_hn",resizer:"ResizableContainer_resizer__ulrUo"}},4828:e=>{e.exports={outputContainer:"ResizableOutput_outputContainer__0oiwv",outputHeader:"ResizableOutput_outputHeader__uP_Vy",closeButton:"ResizableOutput_closeButton__rd6rX",outputContent:"ResizableOutput_outputContent__9A0Ev",loader:"ResizableOutput_loader__Ec2Dc"}}},e=>{var t=t=>e(e.s=t);e.O(0,[335,90,636,593,792],()=>t(2154)),_N_E=e.O()}]);